# NotifierBot项目计划书

## 阶段一：需求分析

### 1.1 项目背景与目标
- **项目名称**: 消息通知器
- **项目背景**: 在编写日报程序和订阅网站文章机器人时，同时遇到了需要将消息发送至某个客户端以实现通知提醒的功能，进而产生了该项目
- **业务目标**: 外部传递消息至本系统，转发至第三方
- **成功标准**: 成功对接日报程序和订阅网站文章机器人

### 1.2 功能需求分析
#### 核心功能
| 功能模块 | 优先级 | 功能描述 |
|---------|--------|----------|
| 通知模块 | 高 | 无状态，传递参数进行第三方通知 |

#### 扩展功能
| 功能模块 | 优先级 | 功能描述 |
|---------|--------|----------|
| 业务功能 | 中 | 针对日报程序和订阅文章管理，开发一些便携的api，例如指定次数和时间间隔发送相同的文本消息 |
| 网络对接 | 中 | http、rpc、mcp server |
| 权限验证 | 低 | 应用系统级别权限校验，例如使用satoken在网络接入层面进行拦截，该功能需要可以通过配置一键关闭和启用 |



### 1.3 风险分析

| 风险类型 | 风险描述 | 影响程度 | 发生概率 | 应对策略 |
|---------|----------|----------|----------|----------|
| 业务风险 | 通知器校验参数泄露；当流量可能被捕获时会发生。 | 中 | 中 | 使用池化技术一次注册，后续不再通过索引进行调用 |
| 资源风险 | 上下文资源损耗 | 高 | 高 | 使用池化技术进行复用和及时销毁 |
| 技术风险 | 高频调用同一通知器：由于服务商限制，通常第三方通知api会有qps限制以及程序实例的并发调用也会有问题，因此这里使用单实例，并尽可能降低qps。 | 高 | 高       | 1，通过mq进行流量削峰，适应程序的消费能力2.聚合部分允许合并的消息进行统一发送3，水平扩展下的qps问题：redis+lua进行令牌通算法 |



---

## 阶段二：系统设计

### 2.1 系统架构设计
#### 架构模式选择
- **架构类型**:  微服务架构

- **选择理由**: 该项目的开发意图是完成单一功能，而非一个完整的系统

- **架构图**: 

  ![](https://cdn.wenzhuo4657.org/img/2025/11/a71e32bc1f6119b74dc48d9084175bb7.png)

#### 技术栈决策
| 层级 | 技术选择 | 版本 |
|------|----------|------|
| 后端 | springboot | [版本] |
| 缓存 | redis | [版本] |
| 消息队列 | rocketmq |  |
| 部署 | docker/jar | [版本] |

### 2.2 模块设计
#### 系统模块划分
```
[项目名称]
├── Notifier(Notifier Module)
│   ├── 通知第三方
│   ├── 注册和销毁通知器实例
│   ├── 检查通知器是否可用：通过redis+lua检查qps等状态
├── Business(Business Module)
│   ├── 分流mq和直接通知： 根据通知器状态
│   ├── 业务逻辑处理： 例如需要连续发送3次消息
│   ├── 等等
├── Consumer(Consumer Module)
│   ├── 聚合消息： 设计聚合键（通知器类型+通知器Id）过滤需要聚合消息，


```

#### 模块间依赖关系
![](https://cdn.wenzhuo4657.org/img/2025/11/5167f815a31774fa7bc98fc89e268283.png)




### 2.3 API设计
#### RESTful API 规范
- **基础URL**: [https://api.example.com/v1]
- **认证方式**: [JWT/OAuth2/API Key等]
- **数据格式**: [JSON/XML]

#### API端点设计
| 端点 | 方法 | 描述 | 请求参数 | 响应格式 |
|------|------|------|----------|----------|
| /users | POST | 创建用户 | [用户信息] | [用户对象] |
| /users/{id} | GET | 获取用户信息 | [用户ID] | [用户对象] |
| /users/{id} | PUT | 更新用户信息 | [用户ID, 更新信息] | [更新后的用户对象] |



---

## 阶段三：开发计划

### 
### 3.1 迭代开发计划
#### 第一阶段：通知器核心模块开发（两周）
- [ ] 项目初始化和环境配置
- [ ] 通知器领域

#### 第二阶段：核心功能开发 (预计 [X] 周)
- [ ] [核心功能1] 开发
- [ ] [核心功能2] 开发
- [ ] [核心功能3] 开发
- [ ] 单元测试编写
- [ ] 功能测试

#### 第三阶段：扩展功能开发 (预计 [X] 周)
- [ ] [扩展功能1] 开发
- [ ] [扩展功能2] 开发
- [ ] 性能优化
- [ ] 集成测试

#### 第四阶段：测试和部署 (预计 [X] 周)
- [ ] 系统测试
- [ ] 用户验收测试
- [ ] 部署准备
- [ ] 正式上线

### 3.3 团队角色分工
| 角色 | 姓名 | 主要职责 |
|------|------|----------|
| 项目经理 | [姓名] | 项目管理、进度控制、风险管控 |
| 技术负责人 | [姓名] | 技术架构、代码审查、技术决策 |
| 前端开发 | [姓名] | 前端界面开发、用户体验优化 |
| 后端开发 | [姓名] | 后端服务开发、API设计 |
| 测试工程师 | [姓名] | 测试用例设计、质量保证 |
| 运维工程师 | [姓名] | 环境配置、部署、监控 |

### 3.4 开发规范
#### 代码规范
- **命名规范**: [驼峰命名/下划线命名等]
- **文件组织**: [目录结构规范]
- **注释规范**: [代码注释要求]
- **代码风格**: [ESLint/Prettier等配置]

#### 版本控制规范
- **分支策略**: [Git Flow/GitHub Flow等]
- **提交信息规范**: [Conventional Commits]
- **代码审查**: [Pull Request流程]

---

## 阶段四：实现与开发

### 4.1 开发环境配置
#### 必需工具
- [ ] IDE: [VS Code/IntelliJ IDEA等]
- [ ] 版本控制: Git
- [ ] 包管理器: [npm/yarn/pip等]
- [ ] 数据库工具: [MySQL Workbench/pgAdmin等]
- [ ] API测试工具: [Postman/Insomnia等]

#### 环境清单
- [ ] 开发环境: [本地开发配置]
- [ ] 测试环境: [测试服务器配置]
- [ ] 预生产环境: [预生产服务器配置]
- [ ] 生产环境: [生产服务器配置]

### 4.2 代码实现计划
#### 核心模块实现优先级
1. **用户认证模块** (预计 [X] 天)
   - [ ] 用户注册功能
   - [ ] 用户登录功能
   - [ ] 密码加密存储
   - [ ] JWT token生成和验证

2. **[核心模块1]** (预计 [X] 天)
   - [ ] [子功能1] 实现
   - [ ] [子功能2] 实现
   - [ ] [子功能3] 实现

3. **[核心模块2]** (预计 [X] 天)
   - [ ] [子功能1] 实现
   - [ ] [子功能2] 实现
   - [ ] [子功能3] 实现

### 4.3 数据库实现
#### 建表脚本
```sql
-- 用户表
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(100) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- 其他表...
```

#### 初始数据
```sql
-- 系统配置初始数据
INSERT INTO system_config (config_key, config_value) VALUES
('site_name', '我的项目'),
('max_users', '1000');
```

---

## 阶段五：测试与质量保证

### 5.1 测试策略
#### 测试类型和覆盖范围
| 测试类型 | 负责人 | 覆盖范围 | 工具/方法 |
|---------|--------|----------|-----------|
| 单元测试 | 开发人员 | 函数级别测试覆盖率>80% | Jest/PyTest等 |
| 集成测试 | 开发人员 | 模块间接口测试 | 自定义测试框架 |
| 系统测试 | 测试工程师 | 端到端功能测试 | Selenium/Cypress等 |
| 性能测试 | 测试工程师 | 负载、压力测试 | JMeter/LoadRunner |
| 安全测试 | 安全工程师 | 漏洞扫描、渗透测试 | OWASP ZAP等 |

### 5.2 测试用例设计
#### 功能测试用例
| 用例编号 | 测试功能 | 测试步骤 | 预期结果 | 优先级 |
|---------|----------|----------|----------|--------|
| TC001 | 用户注册 | 1. 打开注册页面<br>2. 输入有效用户信息<br>3. 点击注册按钮 | 注册成功，跳转到登录页 | 高 |
| TC002 | 用户登录 | 1. 打开登录页面<br>2. 输入正确的用户名密码<br>3. 点击登录按钮 | 登录成功，跳转到首页 | 高 |

### 5.3 缺陷管理
#### 缺陷分级标准
- **严重 (Critical)**: 系统崩溃、数据丢失、安全漏洞
- **重要 (Major)**: 功能无法使用、性能严重问题
- **一般 (Minor)**: 功能部分问题、UI显示问题
- **轻微 (Trivial)**: 拼写错误、样式微调

#### 缺陷处理流程
1. 缺陷发现和记录
2. 缺陷分类和优先级评定
3. 分配给相应开发人员
4. 缺陷修复和验证
5. 缺陷关闭和记录

---

## 阶段六：部署与运维

### 6.1 部署架构
#### 环境配置
| 环境 | 服务器配置 | 数据库 | 缓存 | 其他服务 |
|------|------------|--------|------|----------|
| 开发环境 | [配置] | [配置] | [配置] | [配置] |
| 测试环境 | [配置] | [配置] | [配置] | [配置] |
| 生产环境 | [配置] | [配置] | [配置] | [配置] |

### 6.2 CI/CD 流程
#### 持续集成 (CI)
- [ ] 代码提交触发构建
- [ ] 自动化测试执行
- [ ] 代码质量检查
- [ ] 安全扫描

#### 持续部署 (CD)
- [ ] 自动化部署到测试环境
- [ ] 生产环境部署审批流程
- [ ] 回滚机制
- [ ] 部署通知

### 6.3 监控与日志
#### 监控指标
- **系统指标**: CPU使用率、内存使用率、磁盘空间
- **应用指标**: 响应时间、错误率、吞吐量
- **业务指标**: 用户活跃度、功能使用率

#### 日志管理
- [ ] 应用日志收集
- [ ] 错误日志告警
- [ ] 访问日志分析
- [ ] 日志保留策略

---

## 阶段七：项目管理

### 7.1 进度管理
#### 项目进度跟踪
| 任务 | 开始日期 | 预计结束日期 | 实际结束日期 | 状态 | 负责人 |
|------|----------|--------------|--------------|------|--------|
| 需求分析 | [日期] | [日期] | [日期] | 完成/进行中/延期 | [姓名] |
| 系统设计 | [日期] | [日期] | [日期] | 完成/进行中/延期 | [姓名] |
| 开发阶段1 | [日期] | [日期] | [日期] | 完成/进行中/延期 | [姓名] |

### 7.2 风险管理
#### 风险跟踪表
| 风险ID | 风险描述 | 影响程度 | 发生概率 | 应对措施 | 状态 |
|--------|----------|----------|----------|----------|------|
| R001 | 核心开发人员离职 | 高 | 中 | 技术文档完善、知识共享 | 监控中 |
| R002 | 需求频繁变更 | 中 | 高 | 敏捷开发、版本控制 | 监控中 |

### 7.3 沟通管理
#### 会议安排
- **每日站会**: [时间] - [参与人员]
- **周例会**: [时间] - [参与人员]
- **里程碑评审**: [时间] - [参与人员]
- **项目复盘**: [时间] - [参与人员]

---

## 阶段八：项目总结

### 8.1 项目评估
#### 项目目标达成情况
- [ ] 业务目标完成度: [X]%
- [ ] 功能需求完成度: [X]%
- [ ] 非功能需求达成度: [X]%
- [ ] 项目按时完成: 是/否

### 8.2 经验教训
#### 成功经验
- [项目中的成功做法1]
- [项目中的成功做法2]

#### 改进建议
- [项目中可以改进的地方1]
- [项目中可以改进的地方2]

### 8.3 后续规划
#### 维护计划
- [ ] 版本更新计划
- [ ] 技术债务处理
- [ ] 性能优化计划

#### 功能扩展
- [ ] [下一版本功能1]
- [ ] [下一版本功能2]

---

## 附录

### A. 项目文档清单
- [ ] 需求规格说明书
- [ ] 系统设计文档
- [ ] 数据库设计文档
- [ ] API文档
- [ ] 测试计划
- [ ] 用户手册
- [ ] 运维手册

### B. 参考资源
- [相关技术文档链接]
- [开发框架官方文档]
- [第三方服务文档]

### C. 联系信息
| 角色 | 姓名 | 联系方式 |
|------|------|----------|
| 项目经理 | [姓名] | [邮箱/电话] |
| 技术负责人 | [姓名] | [邮箱/电话] |
| 产品负责人 | [姓名] | [邮箱/电话] |

---

## 使用指南

1. **按阶段填写**: 严格按照从需求分析到项目总结的顺序填写
2. **保持更新**: 项目进行过程中及时更新相关信息
3. **团队协作**: 确保所有相关人员了解和遵循文档内容
4. **灵活调整**: 根据项目实际情况适当调整模板内容

记住：好的规划是项目成功的基础，但要保持灵活性以适应变化！